<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Examen de Ciencia y Ambiente - 2¬∞ Grado</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #e6f7ff;
      padding: 20px;
      padding-top: 160px;
    }
    h1 {
      text-align: center;
      color: #007acc;
    }
    .question {
      margin-bottom: 20px;
      background-color: #ffffff;
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 0 5px rgba(0,0,0,0.1);
    }
    .question h3 {
      margin-bottom: 10px;
    }
    button {
      background-color: #007acc;
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
    #result {
      font-size: 18px;
      margin-top: 20px;
      text-align: center;
      color: green;
    }
    
    #header {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        background-color: #e6f7ff;
        padding: 10px 20px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        z-index: 1000;
    }

.header-content {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
  margin-right: 40px;
}

#nombreEstudiante {
  padding: 8px;
  font-size: 16px;
  border-radius: 6px;
  border: 1px solid #ccc;
  width: 250px;
}

#timer {
  text-align:center; 
  font-size:18px; 
  margin-bottom:20px; 
  color:#cc0000;
}

  </style>
</head>
<body>
<div id="header">
    <div class="header-content">
        <input type="text" id="nombreEstudiante" placeholder="Escribe tu nombre" required>
        <div id="timer"></div>    
    </div>
  <h1>Examen de Ciencia y Ambiente - III Bimestre</h1>
</div>

  <form id="quizForm">
    <div id="quizContainer"></div>
    <button type="button" onclick="calcularResultado()">Enviar respuestas</button>
  </form>
  <div id="result"></div>

  <script>
    let tiempoRestante = 900; // 15 minutos en segundos
    let intervaloTemporizador;

    const preguntas = [
      // Tema 1: Mezclas homog√©neas y heterog√©neas
      { pregunta: "¬øCu√°l es una mezcla homog√©nea?", opciones: ["Agua con sal", "Agua con arena", "Frutas picadas", "Arroz con lentejas"], respuesta: 0 },
      { pregunta: "¬øCu√°l es una mezcla heterog√©nea?", opciones: ["Jugo de naranja", "Leche", "Ensalada de frutas", "Agua con az√∫car"], respuesta: 2 },
      { pregunta: "¬øQu√© mezcla no se puede distinguir f√°cilmente?", opciones: ["Agua con sal", "Arroz con frijoles", "Arena con piedras", "Frutas picadas"], respuesta: 0 },
      { pregunta: "¬øQu√© mezcla se puede separar f√°cilmente?", opciones: ["Agua con sal", "Leche", "Arroz con lentejas", "Jugo de manzana"], respuesta: 2 },
      { pregunta: "¬øCu√°l de estas es homog√©nea?", opciones: ["Leche", "Ensalada", "Sopa con verduras", "Frutas picadas"], respuesta: 0 },
      { pregunta: "El agua con az√∫car es una mezcla homog√©nea.", opciones: ["Verdadero", "Falso"], respuesta: 0 },
      { pregunta: "La ensalada de frutas es una mezcla homog√©nea.", opciones: ["Verdadero", "Falso"], respuesta: 1 },
      { pregunta: "Las mezclas heterog√©neas se pueden separar f√°cilmente.", opciones: ["Verdadero", "Falso"], respuesta: 0 },
      { pregunta: "La leche es una mezcla heterog√©nea.", opciones: ["Verdadero", "Falso"], respuesta: 1 },
      { pregunta: "Las mezclas homog√©neas tienen partes que se distinguen f√°cilmente.", opciones: ["Verdadero", "Falso"], respuesta: 1 },

      // Tema 2: Fuentes de energ√≠a
      { pregunta: "¬øCu√°l es una fuente de energ√≠a renovable?", opciones: ["Sol", "Gas", "Petr√≥leo", "Carb√≥n"], respuesta: 0 },
      { pregunta: "¬øQu√© fuente de energ√≠a usamos para los molinos de viento?", opciones: ["Agua", "Sol", "Aire", "Fuego"], respuesta: 2 },
      { pregunta: "¬øQu√© fuente de energ√≠a usamos para paneles solares?", opciones: ["Agua", "Sol", "Aire", "Gas"], respuesta: 1 },
      { pregunta: "¬øCu√°l de estas no es renovable?", opciones: ["Sol", "Agua", "Petr√≥leo", "Viento"], respuesta: 2 },
      { pregunta: "¬øQu√© fuente de energ√≠a ayuda a mover barcos?", opciones: ["Sol", "Agua", "Aire", "Gas"], respuesta: 1 },
      { pregunta: "El sol es una fuente de energ√≠a renovable.", opciones: ["Verdadero", "Falso"], respuesta: 0 },
      { pregunta: "El petr√≥leo es una fuente de energ√≠a renovable.", opciones: ["Verdadero", "Falso"], respuesta: 1 },
      { pregunta: "El aire puede generar energ√≠a para mover molinos.", opciones: ["Verdadero", "Falso"], respuesta: 0 },
      { pregunta: "La energ√≠a del agua no se puede usar en la comunidad.", opciones: ["Verdadero", "Falso"], respuesta: 1 },
      { pregunta: "La energ√≠a renovable contamina menos que la no renovable.", opciones: ["Verdadero", "Falso"], respuesta: 0 },

      // Tema 3: Caracter√≠sticas del agua, aire y sol
      { pregunta: "¬øQu√© necesitamos para respirar?", opciones: ["Agua", "Sol", "Aire", "Tierra"], respuesta: 2 },
      { pregunta: "¬øQu√© l√≠quido es vital para los seres vivos?", opciones: ["Aceite", "Agua", "Jugo", "Leche"], respuesta: 1 },
      { pregunta: "¬øQu√© nos da luz y calor?", opciones: ["Luna", "Sol", "Estrellas", "Fuego"], respuesta: 1 },
      { pregunta: "¬øQu√© ayuda a las plantas a crecer?", opciones: ["Sol", "Aire", "Agua", "Todas las anteriores"], respuesta: 3 },
      { pregunta: "¬øQu√© cubre todo el planeta y no se ve?", opciones: ["Agua", "Aire", "Sol", "Nubes"], respuesta: 1 },
      { pregunta: "El aire es invisible pero necesario para vivir.", opciones: ["Verdadero", "Falso"], respuesta: 0 },
      { pregunta: "El sol ayuda a las plantas a crecer.", opciones: ["Verdadero", "Falso"], respuesta: 0 },
      { pregunta: "El agua no es importante para los animales.", opciones: ["Verdadero", "Falso"], respuesta: 1 },
      { pregunta: "El aire est√° presente solo en las monta√±as.", opciones: ["Verdadero", "Falso"], respuesta: 1 },
      { pregunta: "El sol nos da luz y calor.", opciones: ["Verdadero", "Falso"], respuesta: 0 },

      // Tema 4: Energ√≠a en la comunidad
      { pregunta: "¬øQu√© energ√≠a se usa en casas con paneles solares?", opciones: ["Gas", "Sol", "Carb√≥n", "Petr√≥leo"], respuesta: 1 },
      { pregunta: "¬øQu√© energ√≠a usan los autos el√©ctricos?", opciones: ["Gasolina", "Electricidad", "Carb√≥n", "Viento"], respuesta: 1 },
      { pregunta: "¬øQu√© energ√≠a contamina menos?", opciones: ["Petr√≥leo", "Gas", "Sol", "Carb√≥n"], respuesta: 2 },
      { pregunta: "¬øQu√© energ√≠a se usa en represas?", opciones: ["Aire", "Agua", "Sol", "Fuego"], respuesta: 1 },
      { pregunta: "¬øCu√°l es una fuente no renovable?", opciones: ["Sol", "Viento", "Petr√≥leo", "Agua"], respuesta: 2 },
      { pregunta: "La energ√≠a solar se puede usar en casas.", opciones: ["Verdadero", "Falso"], respuesta: 0 },
      { pregunta: "La electricidad no se usa en la comunidad.", opciones: ["Verdadero", "Falso"], respuesta: 1 },
      { pregunta: "Los autos el√©ctricos usan energ√≠a renovable.", opciones: ["Verdadero", "Falso"], respuesta: 0 },
      { pregunta: "El carb√≥n es una fuente de energ√≠a renovable.", opciones: ["Verdadero", "Falso"], respuesta: 1 },
      { pregunta: "La energ√≠a renovable ayuda a cuidar el planeta.", opciones: ["Verdadero", "Falso"], respuesta: 0 }
    ];

    function iniciarTemporizador() {
        const timerDiv = document.getElementById("timer");
        intervaloTemporizador = setInterval(() => {
        const minutos = Math.floor(tiempoRestante / 60);
        const segundos = tiempoRestante % 60;
        timerDiv.innerText = `‚è≥ Tiempo restante: ${minutos}:${segundos < 10 ? "0" : ""}${segundos}`;
        tiempoRestante--;

        if (tiempoRestante < 0) {
            clearInterval(intervaloTemporizador);
            calcularResultado();
            document.querySelector("button").disabled = true;
            timerDiv.innerText = "‚è∞ ¬°Tiempo terminado!";
        }
        }, 1000);
    }

    function mostrarRetroalimentacion() {
        preguntas.forEach((p, i) => {
        const seleccionada = document.querySelector(`input[name="q${i}"]:checked`);
        const preguntaDiv = document.querySelectorAll(".question")[i];
        if (seleccionada) {
        if (parseInt(seleccionada.value) === p.respuesta) {
            preguntaDiv.style.border = "2px solid green";
        } else {
            preguntaDiv.style.border = "2px solid red";
        }
        } else {
            preguntaDiv.style.border = "2px solid orange";
        }
        });
    }

    function cargarPreguntas() {
      const container = document.getElementById("quizContainer");
      preguntas.forEach((p, i) => {
        const div = document.createElement("div");
        div.className = "question";
        div.innerHTML = `<h3>${i + 1}. ${p.pregunta}</h3>` +
          p.opciones.map((op, j) =>
            `<label><input type="radio" name="q${i}" value="${j}"> ${op}</label><br>`
          ).join("");
        container.appendChild(div);
      });
    }

    function calcularResultado() {
        let correctas = 0;
        preguntas.forEach((p, i) => {
        const seleccionada = document.querySelector(`input[name="q${i}"]:checked`);
        if (seleccionada && parseInt(seleccionada.value) === p.respuesta) {
            correctas++;
        }
        });

        mostrarRetroalimentacion();
        clearInterval(intervaloTemporizador);

        let mensaje = `¬°Obtuviste ${correctas} de ${preguntas.length} respuestas correctas!`;
        if (correctas >= 35) {
            mensaje += " üèÖ ¬°Excelente trabajo!";
        } else if (correctas >= 25) {
            mensaje += " üòä ¬°Muy bien!";
        } else {
            mensaje += " üòÖ ¬°Sigue practicando!";
        }

          document.getElementById("result").innerText = mensaje;
    }

    function enviarFormularioGoogle(nombre, respuestas) {
        const formURL = "https://docs.google.com/forms/u/0/d/e/FORM_ID/formResponse"; // reemplaza FORM_ID

        const formData = new FormData();
        formData.append("entry.1111111111", nombre); // ID del campo de nombre

        respuestas.forEach((respuesta, index) => {
            formData.append(`entry.${2222222222 + index}`, respuesta); // reemplaza con los IDs reales
        });

        fetch(formURL, {
            method: "POST",
            mode: "no-cors",
            body: formData
        }).then(() => {
            alert("¬°Respuestas enviadas correctamente!");
        });
    }

    function procesarYEnviar() {
        const nombre = document.getElementById("nombreEstudiante").value;
        const respuestas = [];

        preguntas.forEach((p, i) => {
            const seleccionada = document.querySelector(`input[name="q${i}"]:checked`);
            respuestas.push(seleccionada ? seleccionada.value : "Sin respuesta");
        });

        calcularResultado();
        enviarFormularioGoogle(nombre, respuestas);
    }

    cargarPreguntas();
    iniciarTemporizador();
  </script>
</body>
</html>